# å¼¹å¹•APIç®¡ç†åå°

åŸºäº Nuxt 3 æ„å»ºçš„ç°ä»£åŒ–å¼¹å¹•APIç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šå¹³å°å¼¹å¹•è·å–å’Œç®¡ç†ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **å¼€ç®±å³ç”¨** - æ— éœ€å¤æ‚é…ç½®ï¼Œä¸‹è½½å³å¯è¿è¡Œ
- ğŸ”§ **çµæ´»é…ç½®** - æ”¯æŒç¯å¢ƒå˜é‡å’Œå¯è§†åŒ–é…ç½®
- ğŸŒ **å¤šå¹³å°æ”¯æŒ** - çˆ±å¥‡è‰ºã€è…¾è®¯ã€ä¼˜é…·ã€èŠ’æœTVã€Bç«™ã€äººäººè§†é¢‘
- ğŸ“Š **å®æ—¶ç›‘æ§** - é…ç½®çŠ¶æ€å’Œæ—¥å¿—å¯è§†åŒ–
- ğŸ”’ **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒ
- ğŸ”„ **å®Œå…¨å…¼å®¹** - ä¸åŸæœ‰å¼¹å¹•APIç³»ç»Ÿ100%å…¼å®¹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-repo/danmu-admin.git
cd danmu-admin
```

### 2. å®‰è£…ä¾èµ–
```bash
pnpm install
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
pnpm dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) å³å¯ä½¿ç”¨ï¼

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- [å…¼å®¹æ€§è¯´æ˜](./DANMU_COMPATIBILITY.md) - ä¸åŸç³»ç»Ÿçš„å…¼å®¹æ€§ä¿è¯
- [é…ç½®è¿ç§»æŒ‡å—](./CONFIG_MIGRATION.md) - è¯¦ç»†çš„é…ç½®ç³»ç»Ÿè¯´æ˜

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€è‡ªå®šä¹‰é…ç½®ï¼Œå¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶ï¼š

```bash
cp .env.example .env
```

ä¸»è¦é…ç½®é¡¹ï¼š

| ç¯å¢ƒå˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|------|
| `NUXT_OTHER_SERVER` | `https://api.danmu.icu` | ç¬¬ä¸‰æ–¹å¼¹å¹•æœåŠ¡å™¨ |
| `NUXT_VOD_SERVER` | `https://www.caiji.cyou` | VODè§†é¢‘èµ„æºæœåŠ¡å™¨ |
| `NUXT_BILIBILI_COOKIE` | `""` | Bç«™Cookieé…ç½® ğŸ†• |
| `NUXT_YOUKU_CONCURRENCY` | `8` | ä¼˜é…·å¹¶å‘æ•°é…ç½® (æœ€å¤§16) ğŸ†• |

> **æ³¨æ„**: Token è®¤è¯å·²ç¦ç”¨ï¼Œç³»ç»Ÿå¼€ç®±å³ç”¨ï¼Œæ— éœ€é…ç½®è®¿é—®ä»¤ç‰Œã€‚

### é…ç½®éªŒè¯

è®¿é—® `/api/config` æŸ¥çœ‹å½“å‰é…ç½®çŠ¶æ€ã€‚

## ğŸŒ API ç«¯ç‚¹

### æ ¸å¿ƒAPIï¼ˆä¸åŸç³»ç»Ÿå…¼å®¹ï¼‰

```
GET  /api/v2/search/anime          # æœç´¢åŠ¨æ¼«
GET  /api/v2/search/episodes       # æœç´¢é›†æ•°  
POST /api/v2/match                 # åŒ¹é…åŠ¨æ¼«
GET  /api/v2/bangumi/:animeId      # è·å–ç•ªå‰§è¯¦æƒ…
GET  /api/v2/comment/:commentId    # è·å–å¼¹å¹•
GET  /api/logs                     # è·å–æ—¥å¿—
```

### æ–°å¢API

```
GET  /api/config                   # é…ç½®ä¿¡æ¯
GET  /api/cache/stats              # ç¼“å­˜ç»Ÿè®¡
GET  /api/cache/details            # ç¼“å­˜æ•°æ®è¯¦æƒ…
POST /api/cache/clear              # æ¸…ç©ºç¼“å­˜
GET  /api/test/config-validation   # é…ç½®éªŒè¯æµ‹è¯•
POST /api/test/add-sample-data     # æ·»åŠ æµ‹è¯•æ•°æ®
```

## ğŸ“¦ ç”Ÿäº§éƒ¨ç½²

### æ„å»ºåº”ç”¨

```bash
pnpm build
```

### é¢„è§ˆæ„å»ºç»“æœ

```bash
pnpm preview
```

### éƒ¨ç½²åˆ° Vercel

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡åä¸€é”®éƒ¨ç½²
vercel --prod
```

### éƒ¨ç½²åˆ° Cloudflare Workers

```bash
# é…ç½® wrangler.toml åéƒ¨ç½²
wrangler publish
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
